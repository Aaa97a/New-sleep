<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>デジタル時計「--:--:--」</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #f3f3f3;
    }
    #currentId {
      font-size: 1.5em;
      margin-bottom: 1em;
    }
    #toggle {
      padding: 1em 2em;
      font-size: 1.5em;
      border: none;
      border-radius: 8px;
      background: #007acc;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
      margin: 1em 0;
    }
    #toggle:hover {
      background: #005fa3;
    }
    #clockContainer {
      text-align: center;
      margin-top: 1em;
    }
    #clock {
      font-size: 2.5em;
      font-family: "Courier New", Courier, monospace;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <!-- 現在のID表示エリア -->
  <div id="currentId">Current ID: -</div>

  <!-- トグルボタン -->
  <button id="toggle">Start</button>

  <!-- デジタル時計エリア -->
  <div id="clockContainer">
    <h2>デジタル時計(現在の時間)</h2>
    <div id="clock">--:--:--</div>
  </div>

  <script>
    // タイマー管理用の変数
    let urlTimer = null;
    let clockTimer = null;

    const toggleButton = document.getElementById("toggle");
    const currentIdDisplay = document.getElementById("currentId");
    const clockDisplay = document.getElementById("clock");

    // 任意の長さのランダム文字列を生成する関数（英数字のみ）
    function randomId(length) {
      const chars = 'ABCDEFGHIJKLNMOPQRSTUXYZabcdefghijklmnopqrstuvwxyz0123456789';
      let result = '';
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    // URL をランダムな ID に変更して履歴を追加し、現在のIDを表示する処理
    function changeURL() {
      const id = randomId(8);
      currentIdDisplay.textContent = "Current ID: " + id;
      history.pushState(null, "", "/" + id);
    }

    // URL の変更を定期的に実行するタイマー開始
    function startChangingURL() {
      urlTimer = setInterval(changeURL, 100);
    }

    // URL変更タイマーをクリアして停止
    function stopChangingURL() {
      clearInterval(urlTimer);
      urlTimer = null;
    }

    // デジタル時計を更新する関数（ページタイトルにも反映）
    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, "0");
      const minutes = String(now.getMinutes()).padStart(2, "0");
      const seconds = String(now.getSeconds()).padStart(2, "0");
      const timeString = hours + ":" + minutes + ":" + seconds;
      
      // 時計表示の更新
      clockDisplay.textContent = timeString;
      // ページタイトルを更新
      document.title = "デジタル時計「" + timeString + "」";
    }

    // 時計の開始（初回即時更新と1秒ごとの更新）
    function startClock() {
      updateClock();
      clockTimer = setInterval(updateClock, 1000);
    }
    
    // デジタル時計の開始
    startClock();

    // ボタンのクリックでURL切り替えの開始/停止をトグル
    toggleButton.addEventListener("click", () => {
      if (urlTimer === null) {
        startChangingURL();
        toggleButton.textContent = "Stop";
      } else {
        stopChangingURL();
        toggleButton.textContent = "Start";
      }
    });
  </script>
</body>
</html>
